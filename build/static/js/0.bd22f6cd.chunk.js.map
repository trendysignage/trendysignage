{"version":3,"sources":["../node_modules/photoeditorsdk/esm/serialization-MNFH2R67.js"],"names":["I","y","arguments","length","undefined","concat","d","e","_this","_classCallCheck","this","version","spriteOrder","mapRelativeCropPointToImageSpace","i","h","relativeToAbsolutePoint","cropSpace","pointFromSpaceToSpace","imageSpace","mapRelativeCropSizeToScaledImageSize","Math","min","outputSize","height","outputScale","x","width","mapRelativeCropSizeToUnscaledImageSize","editor","_createClass","key","value","validateVersion","Error","image","data","replace","a","operations","find","o","type","r","_this$editor$engine$g","engine","getRootContainers","n","_slicedToArray","previewPosition","transformToolStore","defaultCropMaskPosition","previewSize","maxCropMaskSize","transform","initializeEmptyTransform","outputRotation","options","rotation","flipHorizontally","flipVertically","start","end","identifier","meta","_this2","checkIfPlatformHTML","platform","console","warn","engineMediator","output","container","getResolution","getBounds","size","imageSize","getOutputContainer","getScale","forEach","p","filter","deserializeFilter","adjustment","deserializeAdjustments","focus","deserializeFocus","sprites","t","frame","deserializeFrame","overlay","deserializeOverlay","_i$brush$strokes","brush","strokes","push","apply","_toConsumableArray","deserializeBrush","sprite","spriteIdList","sticker","text","textdesign","common","s","b","order","position","tool","dimensions","deserializeStickers","deserializeTexts","deserializeTextDesign","assetLibrary","customStickers","assets","stickers","opacity","alpha","color","deserialzeColor","tintColor","linear","deserializeLinearFocus","gaussian","deserializeGaussianFocus","radial","deserializeRadialFocus","mirrored","deserializeMirroredFocus","center","radius","u","subtract","magnitude","blurRadius","origin","add","divide","atan2","v","fontIdentifier","fontSize","maxWidth","alignment","textColor","backgroundColor","lineHeight","padding","seed","isInverted","inverted","_this3","paths","map","path","controlPoints","points","id","hardness","intensity","_objectSpread","blendMode","toUpperCase","rgba","tintMode","k","c","_this4","_this$editor$engine$g3","_this5","_i$brush$strokes2","_this6","F","f","_this7","mapImagePointToRelativeCropPoint","absoluteToRelativePoint","mapSizeToRelativeUnscaledCropSize","mapSizeToRelativeScaledCropSize","getPointInDirection","tan","sqrt","pow","_this8","serializeMetaData","z","Object","keys","l","Boolean","serializeAdjustments","serializeFilters","serializeOverlay","_this$serializeTransf","serializeTransform","S","orientation","O","T","some","g","C","serialzeFrame","R","serializeFocus","serializeSticker","serializeText","serializeTextDesign","w","gradientRadius","gradientSize","toLowerCase","createdAt","Date","toISOString","Te"],"mappings":"kPAAqEA,EAAE,WAAD,IAAEC,EAACC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,YAAW,cAAAG,OAAWJ,EAAC,aAAeK,EAAC,WAAO,SAAAA,EAAYC,GAAE,IAAAC,EAAA,KAAAC,YAAA,KAAAH,GAACI,KAAKC,QAAQ,SAASD,KAAKE,YAAY,EAAEF,KAAKG,iCAAiC,SAAAN,GAAI,IAAMO,EAAEC,KAAEC,wBAAwBT,EAAEC,EAAKS,WAAU,GAAO,OAAOF,KAAEG,sBAAsBJ,EAAEN,EAAKS,UAAUT,EAAKW,YAAW,IAAQT,KAAKU,qCAAqC,SAAAb,GAAI,OAAOA,EAAEc,KAAKC,IAAId,EAAKe,WAAWC,OAAOhB,EAAKiB,YAAYC,EAAElB,EAAKe,WAAWI,MAAMnB,EAAKiB,YAAYxB,IAAIS,KAAKkB,uCAAuC,SAAArB,GAAI,OAAOA,EAAEc,KAAKC,IAAId,EAAKe,WAAWC,OAAOhB,EAAKe,WAAWI,QAAQjB,KAAKmB,OAAOtB,EAAgwB,OAA9vBuB,YAAAxB,EAAA,EAAAyB,IAAA,kBAAAC,MAA4gB,SAAgBzB,GAAG,OAAOG,KAAKC,UAAUJ,IAAE,CAAAwB,IAAA,4BAAAC,MAAuM,SAA0BzB,GAAG,GAAc,kBAAJA,GAAcG,KAAKuB,gBAAgB1B,EAAEI,SAAS,OAAO,EAAK,GAAc,kBAAJJ,EAAc,MAAM,IAAI2B,MAAM,0DAA0D,OAAO,IAAM,CAAAH,IAAA,mBAAAC,MAAA,SAAiBzB,GAAG,IAAMO,EAAE,GAAmK,OAA7JP,EAAE4B,QAAOrB,EAAEqB,MAAM,CAACR,MAAMpB,EAAE4B,MAAMR,MAAMH,OAAOjB,EAAE4B,MAAMX,OAAOY,KAAK7B,EAAE4B,MAAMC,KAAK7B,EAAE4B,MAAMC,KAAKC,QAAQrC,IAAI,IAAI,IAAIc,EAAEqB,MAAMC,KAAKtB,EAAEqB,MAAMC,KAAKpC,IAAIc,EAAEqB,MAAMC,KAAK,IAAUtB,IAAE,CAAAiB,IAAA,4BAAAC,MAAA,SAA0BzB,GAAG,IAAMO,EAAE,GAASwB,EAAE/B,EAAEgC,WAAWC,MAAK,SAAAC,GAAC,MAAW,gBAATA,EAAEC,QAA4BC,EAAEpC,EAAEgC,WAAWC,MAAK,SAAAC,GAAC,MAAW,cAATA,EAAEC,QAAoBE,EAASlC,KAAKmB,OAAOgB,OAAOC,oBAAtBC,EAAyCC,YAAAJ,EAAA,GAAxC,GAAwlB,OAA/iBlC,KAAKuC,gBAAgBvC,KAAKmB,OAAOqB,mBAAmBC,wBAAwBzC,KAAK0C,YAAY1C,KAAKmB,OAAOqB,mBAAmBG,gBAAgB3C,KAAKS,WAAW4B,EAAEjC,EAAEwC,UAAUhD,EAAEiD,2BAAiC,MAAHjB,IAASxB,EAAEwC,UAAUE,eAAelB,EAAEmB,QAAQC,SAAS5C,EAAEwC,UAAUK,iBAAiBrB,EAAEmB,QAAQE,mBAAkB,EAAM7C,EAAEwC,UAAUM,eAAetB,EAAEmB,QAAQG,iBAAgB,GAASjB,IAAG7B,EAAEwC,UAAUO,MAAMlB,EAAEc,QAAQI,MAAM/C,EAAEwC,UAAUQ,IAAInB,EAAEc,QAAQK,IAAIhD,EAAEwC,UAAUI,SAASf,EAAEc,QAAQC,UAAU,EAAE5C,EAAEwC,UAAUS,WAAWpB,EAAEc,QAAQO,KAAKrB,EAAEc,QAAQO,KAAKD,WAAW,IAAUjD,IAAE,CAAAiB,IAAA,cAAAC,MAAA,SAAYzB,GAAE,IAAKwC,EAAEN,EAAPwB,EAAA,KAAenD,EAAE,GAAMP,EAAEyD,OAAM1D,EAAE4D,oBAAoB3D,EAAEyD,KAAKG,WAAiBC,QAAQC,KAAK,4CAA4C,IAAM/B,EAAE5B,KAAKmB,OAAOyC,eAAeC,OAAOC,UAAUC,gBAA2B9B,EAAGjC,KAAKmB,OAAOyC,eAAenC,MAAMqC,UAAUE,YAAnDC,KAAs0D,OAAvwDjE,KAAKa,WAAWe,EAAE5B,KAAKkE,UAAUjC,EAAEjC,KAAKO,UAAUP,KAAKmB,OAAOgB,OAAOgC,qBAAqBnE,KAAKe,YAAYf,KAAKO,UAAU6D,WAAWvE,EAAEgC,WAAWwC,SAAQ,SAAAC,GAAI,OAAOA,EAAEtC,MAAM,IAAI,SAAS5B,EAAEmE,OAAO3E,EAAE4E,kBAAkBF,EAAEvB,SAAS,MAAM,IAAI,cAAc3C,EAAEqE,WAAW7E,EAAE8E,uBAAuBJ,EAAEvB,SAAS,MAAM,IAAI,QAAQ3C,EAAEuE,MAAMpB,EAAKqB,iBAAiBN,EAAEvB,SAAS,MAAM,IAAI,SAA0BuB,EAAEvB,QAAb8B,QAAuBR,SAAQ,SAAAS,GAAI,OAAOA,EAAE9C,MAAM,IAAI,QAAQ5B,EAAE2E,MAAMxB,EAAKyB,iBAAiBF,EAAE/B,SAAS,MAAM,IAAI,UAAU3C,EAAE6E,QAAQrF,EAAEsF,mBAAmBJ,EAAE/B,SAAS,MAAM,IAAI,QAAkE,IAAAoC,EAA1D,GAAI/E,EAAEgF,OAAqDD,EAAA/E,EAAEgF,MAAMC,SAAQC,KAAIC,MAAAJ,EAAAK,YAAIjC,EAAKkC,iBAAiBX,EAAE/B,SAASsC,eAAvGjF,EAAEgF,MAAM7B,EAAKkC,iBAAiBX,EAAE/B,SAAgF,MAAM,IAAI,UAAU,IAAI,OAAO,IAAI,aAAiB3C,EAAEsF,SAAQtF,EAAEsF,OAAO,CAACC,aAAa,GAAGC,QAAQ,GAAGC,KAAK,GAAGC,WAAW,GAAGC,OAAO,KAAI,IAAMC,EAAEC,cAAI7F,EAAEsF,OAAOC,aAAaL,KAAKU,GAAG5F,EAAEsF,OAAOK,OAAOC,GAAG,CAACE,MAAM3C,EAAKrD,YAAYiG,SAAS5C,EAAKpD,iCAAiC2E,EAAE/B,QAAQoD,UAAUC,KAAK,UAAUpD,SAAS8B,EAAE/B,QAAQC,UAAU,EAAEC,iBAAiB6B,EAAE/B,QAAQE,iBAAiBC,eAAe4B,EAAE/B,QAAQG,gBAAgBK,EAAKrD,aAAa,EAAc,YAAT4E,EAAE9C,MAAkB5B,EAAEsF,OAAOK,OAAOC,GAAGI,KAAK,UAAUhG,EAAEsF,OAAOK,OAAOC,GAAG/B,KAAK,CAAChD,MAAMsC,EAAK7C,qCAAqCoE,EAAE/B,QAAQsD,WAAWrF,GAAGF,OAAOyC,EAAK7C,qCAAqCoE,EAAE/B,QAAQsD,WAAW9G,IAAIa,EAAEsF,OAAOE,QAAQI,GAAGpG,EAAE0G,oBAAoBxB,EAAE/B,UAA0B,SAAT+B,EAAE9C,MAAe5B,EAAEsF,OAAOK,OAAOC,GAAGI,KAAK,OAAOhG,EAAEsF,OAAOG,KAAKG,GAAGzC,EAAKgD,iBAAiBzB,EAAE/B,UAA0B,eAAT+B,EAAE9C,OAAqB5B,EAAEsF,OAAOK,OAAOC,GAAGI,KAAK,aAAahG,EAAEsF,OAAOI,WAAWE,GAAGzC,EAAKiD,sBAAsB1B,EAAE/B,kBAA0DlD,EAAE4G,eAAcrG,EAAEsG,gBAA8D,OAA7C3E,EAAsB,OAAnBM,EAAExC,EAAE4G,mBAAoB,EAAOpE,EAAEsE,aAAc,EAAO5E,EAAE6E,WAAW,IAAUxG,IAAE,CAAAiB,IAAA,mBAAAC,MAAA,SAAiBzB,GAAG,MAAM,CAACwD,WAAWxD,EAAEwD,WAAWwD,QAAQhH,EAAEiH,MAAM7F,MAAMjB,KAAKkB,uCAAuCrB,EAAEoE,MAAM8C,MAAMnH,EAAEoH,gBAAgBnH,EAAEoH,cAAY,CAAA5F,IAAA,mBAAAC,MAAA,SAAiBzB,GAAG,OAAOA,EAAEmC,MAAM,IAAI,SAAS,MAAM,CAACqB,WAAW,SAAS6D,OAAOlH,KAAKmH,uBAAuBtH,EAAEkD,UAAU,IAAI,WAAW,MAAM,CAACM,WAAW,WAAW+D,SAASpH,KAAKqH,yBAAyBxH,EAAEkD,UAAU,IAAI,SAAS,MAAM,CAACM,WAAW,SAASiE,OAAOtH,KAAKuH,uBAAuB1H,EAAEkD,UAAU,IAAI,WAAW,MAAM,CAACM,WAAW,WAAWmE,SAASxH,KAAKyH,yBAAyB5H,EAAEkD,aAAsC,CAAA1B,IAAA,yBAAAC,MAAA,SAAuBzB,GAAG,MAAM,CAAC6H,OAAO1H,KAAKG,iCAAiCN,EAAEsD,OAAOwE,OAAO,IAAIC,IAAE5H,KAAKG,iCAAiCN,EAAEsD,QAAQ0E,SAAS,IAAID,IAAE5H,KAAKG,iCAAiCN,EAAEuD,OAAO0E,UAAUC,WAAW/H,KAAKU,qCAAqCb,EAAEkI,eAAa,CAAA1G,IAAA,yBAAAC,MAAA,SAAuBzB,GAAG,MAAM,CAACsD,MAAMnD,KAAKG,iCAAiCN,EAAEsD,OAAOC,IAAIpD,KAAKG,iCAAiCN,EAAEuD,KAAK2E,WAAW/H,KAAKU,qCAAqCb,EAAEkI,eAAa,CAAA1G,IAAA,2BAAAC,MAAA,SAAyBzB,GAAG,MAAM,CAACkI,WAAW/H,KAAKU,qCAAqCb,EAAEkI,eAAa,CAAA1G,IAAA,2BAAAC,MAAA,SAAyBzB,GAAG,IAAMO,EAAE,IAAIwH,IAAE5H,KAAKG,iCAAiCN,EAAEsD,QAAQ0E,SAAS,IAAID,IAAE5H,KAAKG,iCAAiCN,EAAEuD,OAAO,MAAM,CAAC4E,OAAO,IAAIJ,IAAE5H,KAAKG,iCAAiCN,EAAEsD,QAAQ8E,IAAI,IAAIL,IAAE5H,KAAKG,iCAAiCN,EAAEuD,OAAO8E,OAAO,GAAGlF,SAASrC,KAAKwH,MAAM/H,EAAEb,EAAEa,EAAEY,GAAGiD,KAAKjE,KAAKU,qCAAqCb,EAAEoE,MAAM8D,WAAW/H,KAAKU,qCAAqCb,EAAEkI,eAAa,CAAA1G,IAAA,mBAAAC,MAAA,SAAiBzB,GAAG,MAAM,CAACwD,WAAW+E,YAAEvI,EAAEwI,gBAAgBC,SAAStI,KAAKU,qCAAqCb,EAAEyI,UAAUrH,MAAMjB,KAAKU,qCAAqCb,EAAE0I,UAAUC,UAAU3I,EAAE2I,UAAUC,UAAU7I,EAAEoH,gBAAgBnH,EAAEkH,OAAO2B,gBAAgB9I,EAAEoH,gBAAgBnH,EAAE6I,iBAAiBC,WAAW9I,EAAE8I,WAAW9C,KAAKhG,EAAEgG,QAAM,CAAAxE,IAAA,wBAAAC,MAAA,SAAsBzB,GAAG,MAAM,CAACwD,WAAWxD,EAAEwD,WAAWpC,MAAMjB,KAAKU,qCAAqCb,EAAEoB,OAAO2H,QAAQ5I,KAAKU,qCAAqCb,EAAE+I,SAAS7B,MAAMnH,EAAEoH,gBAAgBnH,EAAEkH,OAAO8B,KAAKhJ,EAAEgJ,KAAKhD,KAAKhG,EAAEgG,KAAKiD,WAAWjJ,EAAEkJ,YAAU,CAAA1H,IAAA,mBAAAC,MAAA,SAAiBzB,GAAE,IAAAmJ,EAAA,KAAC,MAAM,CAAC3D,QAAQxF,EAAEoJ,MAAMC,KAAI,SAAA9I,GAAI,MAAM,CAAC+I,KAAK,CAACC,cAAchJ,EAAEiJ,OAAOH,IAAIF,EAAK7I,mCAAmCiF,MAAM,CAACkE,GAAG,qBAAqBvC,MAAMnH,EAAEoH,gBAAgB5G,EAAEgF,MAAM2B,OAAO9C,KAAK7D,EAAEgF,MAAMnB,KAAKsF,SAASnJ,EAAEgF,MAAMmE,kBAAc,EAAAlI,IAAA,oBAAAC,MAAp1M,SAAyBzB,GAAG,MAAM,CAAC2J,UAAU3J,EAAE2J,UAAUnG,WAAWxD,EAAEwD,cAAY,CAAAhC,IAAA,yBAAAC,MAAA,SAA8BzB,GAAG,OAAA4J,YAAA,GAAU5J,KAAG,CAAAwB,IAAA,qBAAAC,MAAA,SAA0BzB,GAAG,MAAM,CAACwD,WAAWxD,EAAEwD,WAAWwD,QAAQhH,EAAE2J,UAAUE,UAAU7J,EAAE6J,UAAU/H,QAAQ,gBAAe,SAAAvB,GAAC,OAAEA,EAAEuJ,cAAchI,QAAQ,IAAI,IAAIA,QAAQ,IAAI,UAAM,CAAAN,IAAA,2BAAAC,MAAA,WAAkC,MAAM,CAACwB,eAAe,EAAEG,kBAAiB,EAAMC,gBAAe,EAAMC,MAAM,CAACnC,EAAE,EAAEzB,EAAE,GAAG6D,IAAI,CAACpC,EAAE,EAAEzB,EAAE,GAAGyD,SAAS,KAAG,CAAA3B,IAAA,kBAAAC,MAAA,SAAuBzB,GAAG,OAAGA,GAAMA,EAAE+J,KAAa/J,EAAE+J,KAAY,CAAC,EAAE,EAAE,EAAE,KAAG,CAAAvI,IAAA,sBAAAC,MAA2C,SAA2BzB,GAAG,MAAW,UAAJA,IAAY,CAAAwB,IAAA,sBAAAC,MAAA,SAA2BzB,GAAG,MAAM,CAACwD,WAAWxD,EAAEwD,WAAWwD,QAAQhH,EAAEiH,OAAO,EAAE+C,SAAShK,EAAEgK,UAAU,OAAO5C,UAAUrH,EAAEoH,gBAAgBnH,EAAEoH,gBAAYrH,EAA7vC,GAAy1NkK,EAAE,WAAD,IAAEvK,EAACC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,YAAW,cAAAG,OAAWJ,EAAC,aAAewK,EAAC,WAAO,SAAAA,EAAYlK,GAAE,IAAAmK,EAAA,KAAAjK,YAAA,KAAAgK,GAAC/J,KAAKC,QAAQ,QAAQD,KAAKE,YAAY,EAAEF,KAAKG,iCAAiC,SAAAN,GAAI,IAAMO,EAAEC,KAAEC,wBAAwBT,EAAEmK,EAAKzJ,WAAU,GAAO,OAAOF,KAAEG,sBAAsBJ,EAAE4J,EAAKzJ,UAAUyJ,EAAKvJ,YAAW,IAAQT,KAAKU,qCAAqC,SAAAb,GAAI,OAAOA,EAAEc,KAAKC,IAAIoJ,EAAKnJ,WAAWC,OAAOkJ,EAAKjJ,YAAYC,EAAEgJ,EAAKnJ,WAAWI,MAAM+I,EAAKjJ,YAAYxB,IAAIS,KAAKkB,uCAAuC,SAAArB,GAAI,OAAOA,EAAEc,KAAKC,IAAIoJ,EAAKnJ,WAAWC,OAAOkJ,EAAKnJ,WAAWI,QAAQjB,KAAKmB,OAAOtB,EAAgwB,OAA9vBuB,YAAA2I,EAAA,EAAA1I,IAAA,kBAAAC,MAA4gB,SAAgBzB,GAAG,OAAOG,KAAKC,UAAUJ,IAAE,CAAAwB,IAAA,4BAAAC,MAAuM,SAA0BzB,GAAG,GAAc,kBAAJA,GAAcG,KAAKuB,gBAAgB1B,EAAEI,SAAS,OAAO,EAAK,GAAc,kBAAJJ,EAAc,MAAM,IAAI2B,MAAM,0DAA0D,OAAO,IAAM,CAAAH,IAAA,mBAAAC,MAAA,SAAiBzB,GAAG,IAAMO,EAAE,GAAmK,OAA7JP,EAAE4B,QAAOrB,EAAEqB,MAAM,CAACR,MAAMpB,EAAE4B,MAAMR,MAAMH,OAAOjB,EAAE4B,MAAMX,OAAOY,KAAK7B,EAAE4B,MAAMC,KAAK7B,EAAE4B,MAAMC,KAAKC,QAAQmI,IAAI,IAAI,IAAI1J,EAAEqB,MAAMC,KAAKtB,EAAEqB,MAAMC,KAAKoI,IAAI1J,EAAEqB,MAAMC,KAAK,IAAUtB,IAAE,CAAAiB,IAAA,4BAAAC,MAAA,SAA0BzB,GAAG,IAAMO,EAAE,GAASwB,EAAE/B,EAAEgC,WAAWC,MAAK,SAAAC,GAAC,MAAW,gBAATA,EAAEC,QAA4BC,EAAEpC,EAAEgC,WAAWC,MAAK,SAAAC,GAAC,MAAW,cAATA,EAAEC,QAAoBiI,EAASjK,KAAKmB,OAAOgB,OAAOC,oBAAtBC,EAAyCC,YAAA2H,EAAA,GAAxC,GAAwlB,OAA/iBjK,KAAKuC,gBAAgBvC,KAAKmB,OAAOqB,mBAAmBC,wBAAwBzC,KAAK0C,YAAY1C,KAAKmB,OAAOqB,mBAAmBG,gBAAgB3C,KAAKS,WAAW4B,EAAEjC,EAAEwC,UAAUmH,EAAElH,2BAAiC,MAAHjB,IAASxB,EAAEwC,UAAUE,eAAelB,EAAEmB,QAAQC,SAAS5C,EAAEwC,UAAUK,iBAAiBrB,EAAEmB,QAAQE,mBAAkB,EAAM7C,EAAEwC,UAAUM,eAAetB,EAAEmB,QAAQG,iBAAgB,GAASjB,IAAG7B,EAAEwC,UAAUO,MAAMlB,EAAEc,QAAQI,MAAM/C,EAAEwC,UAAUQ,IAAInB,EAAEc,QAAQK,IAAIhD,EAAEwC,UAAUI,SAASf,EAAEc,QAAQC,UAAU,EAAE5C,EAAEwC,UAAUS,WAAWpB,EAAEc,QAAQO,KAAKrB,EAAEc,QAAQO,KAAKD,WAAW,IAAUjD,IAAE,CAAAiB,IAAA,cAAAC,MAAA,SAAYzB,GAAE,IAAKwC,EAAEN,EAAPmI,EAAA,KAAe9J,EAAE,GAAMP,EAAEyD,OAAMyG,EAAEvG,oBAAoB3D,EAAEyD,KAAKG,WAAiBC,QAAQC,KAAK,4CAA4C,IAAM/B,EAAE5B,KAAKmB,OAAOyC,eAAeC,OAAOC,UAAUC,gBAA2B9B,EAAGjC,KAAKmB,OAAOyC,eAAenC,MAAMqC,UAAUE,YAAnDC,KAAs0D,OAAvwDjE,KAAKa,WAAWe,EAAE5B,KAAKkE,UAAUjC,EAAEjC,KAAKO,UAAUP,KAAKmB,OAAOgB,OAAOgC,qBAAqBnE,KAAKe,YAAYf,KAAKO,UAAU6D,WAAWvE,EAAEgC,WAAWwC,SAAQ,SAAAC,GAAI,OAAOA,EAAEtC,MAAM,IAAI,SAAS5B,EAAEmE,OAAOwF,EAAEvF,kBAAkBF,EAAEvB,SAAS,MAAM,IAAI,cAAc3C,EAAEqE,WAAWsF,EAAErF,uBAAuBJ,EAAEvB,SAAS,MAAM,IAAI,QAAQ3C,EAAEuE,MAAMuF,EAAKtF,iBAAiBN,EAAEvB,SAAS,MAAM,IAAI,SAA0BuB,EAAEvB,QAAb8B,QAAuBR,SAAQ,SAAAS,GAAI,OAAOA,EAAE9C,MAAM,IAAI,QAAQ5B,EAAE2E,MAAMmF,EAAKlF,iBAAiBF,EAAE/B,SAAS,MAAM,IAAI,UAAU3C,EAAE6E,QAAQ8E,EAAE7E,mBAAmBJ,EAAE/B,SAAS,MAAM,IAAI,QAAkE,IAAAoH,EAA1D,GAAI/J,EAAEgF,OAAqD+E,EAAA/J,EAAEgF,MAAMC,SAAQC,KAAIC,MAAA4E,EAAA3E,YAAI0E,EAAKzE,iBAAiBX,EAAE/B,SAASsC,eAAvGjF,EAAEgF,MAAM8E,EAAKzE,iBAAiBX,EAAE/B,SAAgF,MAAM,IAAI,UAAU,IAAI,OAAO,IAAI,aAAiB3C,EAAEsF,SAAQtF,EAAEsF,OAAO,CAACC,aAAa,GAAGC,QAAQ,GAAGC,KAAK,GAAGC,WAAW,GAAGC,OAAO,KAAI,IAAMC,EAAEC,cAAI7F,EAAEsF,OAAOC,aAAaL,KAAKU,GAAG5F,EAAEsF,OAAOK,OAAOC,GAAG,CAACE,MAAMgE,EAAKhK,YAAYiG,SAAS+D,EAAK/J,iCAAiC2E,EAAE/B,QAAQoD,UAAUC,KAAK,UAAUpD,SAAS8B,EAAE/B,QAAQC,UAAU,EAAEC,iBAAiB6B,EAAE/B,QAAQE,iBAAiBC,eAAe4B,EAAE/B,QAAQG,gBAAgBgH,EAAKhK,aAAa,EAAc,YAAT4E,EAAE9C,MAAkB5B,EAAEsF,OAAOK,OAAOC,GAAGI,KAAK,UAAUhG,EAAEsF,OAAOK,OAAOC,GAAG/B,KAAK,CAAChD,MAAMiJ,EAAKxJ,qCAAqCoE,EAAE/B,QAAQsD,WAAWrF,GAAGF,OAAOoJ,EAAKxJ,qCAAqCoE,EAAE/B,QAAQsD,WAAW9G,IAAIa,EAAEsF,OAAOE,QAAQI,GAAG+D,EAAEzD,oBAAoBxB,EAAE/B,UAA0B,SAAT+B,EAAE9C,MAAe5B,EAAEsF,OAAOK,OAAOC,GAAGI,KAAK,OAAOhG,EAAEsF,OAAOG,KAAKG,GAAGkE,EAAK3D,iBAAiBzB,EAAE/B,UAA0B,eAAT+B,EAAE9C,OAAqB5B,EAAEsF,OAAOK,OAAOC,GAAGI,KAAK,aAAahG,EAAEsF,OAAOI,WAAWE,GAAGkE,EAAK1D,sBAAsB1B,EAAE/B,kBAA0DlD,EAAE4G,eAAcrG,EAAEsG,gBAA8D,OAA7C3E,EAAsB,OAAnBM,EAAExC,EAAE4G,mBAAoB,EAAOpE,EAAEsE,aAAc,EAAO5E,EAAE6E,WAAW,IAAUxG,IAAE,CAAAiB,IAAA,mBAAAC,MAAA,SAAiBzB,GAAG,MAAM,CAACwD,WAAWxD,EAAEwD,WAAWwD,QAAQhH,EAAEiH,MAAM7F,MAAMjB,KAAKkB,uCAAuCrB,EAAEoE,MAAM8C,MAAMgD,EAAE/C,gBAAgBnH,EAAEoH,cAAY,CAAA5F,IAAA,mBAAAC,MAAA,SAAiBzB,GAAG,OAAOA,EAAEmC,MAAM,IAAI,SAAS,MAAM,CAACqB,WAAW,SAAS6D,OAAOlH,KAAKmH,uBAAuBtH,EAAEkD,UAAU,IAAI,WAAW,MAAM,CAACM,WAAW,WAAW+D,SAASpH,KAAKqH,yBAAyBxH,EAAEkD,UAAU,IAAI,SAAS,MAAM,CAACM,WAAW,SAASiE,OAAOtH,KAAKuH,uBAAuB1H,EAAEkD,UAAU,IAAI,WAAW,MAAM,CAACM,WAAW,WAAWmE,SAASxH,KAAKyH,yBAAyB5H,EAAEkD,UAAU,QAAQ,UAAe,CAAA1B,IAAA,yBAAAC,MAAA,SAAuBzB,GAAG,MAAM,CAAC6H,OAAO1H,KAAKG,iCAAiCN,EAAEsD,OAAOwE,OAAO,IAAIC,IAAE5H,KAAKG,iCAAiCN,EAAEsD,QAAQ0E,SAAS,IAAID,IAAE5H,KAAKG,iCAAiCN,EAAEuD,OAAO0E,UAAUC,WAAW/H,KAAKU,qCAAqCb,EAAEkI,eAAa,CAAA1G,IAAA,yBAAAC,MAAA,SAAuBzB,GAAG,MAAM,CAACsD,MAAMnD,KAAKG,iCAAiCN,EAAEsD,OAAOC,IAAIpD,KAAKG,iCAAiCN,EAAEuD,KAAK2E,WAAW/H,KAAKU,qCAAqCb,EAAEkI,eAAa,CAAA1G,IAAA,2BAAAC,MAAA,SAAyBzB,GAAG,MAAM,CAACkI,WAAW/H,KAAKU,qCAAqCb,EAAEkI,eAAa,CAAA1G,IAAA,2BAAAC,MAAA,SAAyBzB,GAAG,IAAMO,EAAE,IAAIwH,IAAE5H,KAAKG,iCAAiCN,EAAEsD,QAAQ0E,SAAS,IAAID,IAAE5H,KAAKG,iCAAiCN,EAAEuD,OAAO,MAAM,CAAC4E,OAAO,IAAIJ,IAAE5H,KAAKG,iCAAiCN,EAAEsD,QAAQ8E,IAAI,IAAIL,IAAE5H,KAAKG,iCAAiCN,EAAEuD,OAAO8E,OAAO,GAAGlF,SAASrC,KAAKwH,MAAM/H,EAAEb,EAAEa,EAAEY,GAAGiD,KAAKjE,KAAKU,qCAAqCb,EAAEoE,MAAM8D,WAAW/H,KAAKU,qCAAqCb,EAAEkI,eAAa,CAAA1G,IAAA,mBAAAC,MAAA,SAAiBzB,GAAG,MAAM,CAACwD,WAAW+E,YAAEvI,EAAEwI,gBAAgBC,SAAStI,KAAKU,qCAAqCb,EAAEyI,UAAUrH,MAAMjB,KAAKU,qCAAqCb,EAAE0I,UAAUC,UAAU3I,EAAE2I,UAAUC,UAAUsB,EAAE/C,gBAAgBnH,EAAEkH,OAAO2B,gBAAgBqB,EAAE/C,gBAAgBnH,EAAE6I,iBAAiBC,WAAW9I,EAAE8I,WAAW9C,KAAKhG,EAAEgG,QAAM,CAAAxE,IAAA,wBAAAC,MAAA,SAAsBzB,GAAG,MAAM,CAACwD,WAAWxD,EAAEwD,WAAWpC,MAAMjB,KAAKU,qCAAqCb,EAAEoB,OAAO2H,QAAQ5I,KAAKU,qCAAqCb,EAAE+I,SAAS7B,MAAMgD,EAAE/C,gBAAgBnH,EAAEkH,OAAO8B,KAAKhJ,EAAEgJ,KAAKhD,KAAKhG,EAAEgG,KAAKiD,WAAWjJ,EAAEkJ,YAAU,CAAA1H,IAAA,mBAAAC,MAAA,SAAiBzB,GAAE,IAAAuK,EAAA,KAAC,MAAM,CAAC/E,QAAQxF,EAAEoJ,MAAMC,KAAI,SAAA9I,GAAI,MAAM,CAAC+I,KAAK,CAACC,cAAchJ,EAAEiJ,OAAOH,IAAIkB,EAAKjK,mCAAmCiF,MAAM,CAACkE,GAAG,qBAAqBvC,MAAMgD,EAAE/C,gBAAgB5G,EAAEgF,MAAM2B,OAAO9C,KAAK7D,EAAEgF,MAAMnB,KAAKsF,SAASnJ,EAAEgF,MAAMmE,kBAAc,EAAAlI,IAAA,oBAAAC,MAA/0M,SAAyBzB,GAAG,MAAM,CAAC2J,UAAU3J,EAAE2J,UAAUnG,WAAWxD,EAAEwD,cAAY,CAAAhC,IAAA,yBAAAC,MAAA,SAA8BzB,GAAG,OAAA4J,YAAA,GAAU5J,KAAG,CAAAwB,IAAA,qBAAAC,MAAA,SAA0BzB,GAAG,MAAM,CAACwD,WAAWxD,EAAEwD,WAAWwD,QAAQhH,EAAE2J,UAAUE,UAAU7J,EAAE6J,UAAU/H,QAAQ,gBAAe,SAAAvB,GAAC,OAAEA,EAAEuJ,cAAchI,QAAQ,IAAI,IAAIA,QAAQ,IAAI,UAAM,CAAAN,IAAA,2BAAAC,MAAA,WAAkC,MAAM,CAACwB,eAAe,EAAEG,kBAAiB,EAAMC,gBAAe,EAAMC,MAAM,CAACnC,EAAE,EAAEzB,EAAE,GAAG6D,IAAI,CAACpC,EAAE,EAAEzB,EAAE,GAAGyD,SAAS,KAAG,CAAA3B,IAAA,kBAAAC,MAAA,SAAuBzB,GAAG,OAAGA,GAAMA,EAAE+J,KAAa/J,EAAE+J,KAAY,CAAC,EAAE,EAAE,EAAE,KAAG,CAAAvI,IAAA,sBAAAC,MAA2C,SAA2BzB,GAAG,MAAW,UAAJA,IAAY,CAAAwB,IAAA,sBAAAC,MAAA,SAA2BzB,GAAG,MAAM,CAACwD,WAAWxD,EAAEwD,WAAWwD,QAAQhH,EAAEiH,OAAO,EAAE+C,SAAShK,EAAEgK,UAAU,OAAO5C,UAAU8C,EAAE/C,gBAAgBnH,EAAEoH,gBAAY8C,EAA5vC,GAAouTM,EAAl3F,SAAoiGC,EAAC,WAAO,SAAAA,EAAYzK,EAAEO,EAAEwB,EAAEK,EAAEI,EAAEN,GAAE,IAAAwI,EAAA,KAAAxK,YAAA,KAAAuK,GAACtK,KAAKC,QAAQ,SAASD,KAAKwK,iCAAiC,SAAA3K,GAAI,IAAMO,EAAEC,KAAEG,sBAAsBX,EAAE0K,EAAK9J,WAAW8J,EAAKhK,WAAU,GAAO,OAAOF,KAAEoK,wBAAwBrK,EAAEmK,EAAKhK,WAAU,IAAQP,KAAK0K,kCAAkC,SAAA7K,GAAI,OAAOA,EAAEc,KAAKC,IAAI2J,EAAK1J,WAAWC,OAAOyJ,EAAK1J,WAAWI,QAAQjB,KAAK2K,gCAAgC,SAAA9K,GAAI,OAAOA,EAAEc,KAAKC,IAAI2J,EAAK1J,WAAWC,OAAOyJ,EAAKxJ,YAAYC,EAAEuJ,EAAK1J,WAAWI,MAAMsJ,EAAKxJ,YAAYxB,IAAIS,KAAK4K,oBAAoB,SAAC/K,GAAY,IAAVO,EAACZ,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,EAAEoC,EAACpC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,EAAWyC,EAAEtB,KAAKkK,IAAIzK,GAASiC,EAAE1B,KAAKmK,KAAKnK,KAAAoK,IAAA9I,EAAG,GAAE,GAAG,MAAM,CAACjB,EAAEnB,EAAEmB,EAAEY,EAAES,EAAE9C,EAAEM,EAAEN,EAAEqC,EAAEK,EAAEI,IAAIrC,KAAKuC,gBAAgB1C,EAAEG,KAAK0C,YAAYtC,EAAEJ,KAAKa,WAAWe,EAAE5B,KAAKkE,UAAUjC,EAAEjC,KAAKS,WAAW4B,EAAErC,KAAKO,UAAUwB,EAAE/B,KAAKe,YAAYgB,EAAEqC,WAA0c,OAA/bhD,YAAAkJ,EAAA,EAAAjJ,IAAA,YAAAC,MAA+b,SAAUzB,EAAEO,EAAEwB,GAAE,IAAAoJ,EAAA,KAAO/I,EAAEqI,EAAEW,oBAA0B5I,EAAE,CAACpB,MAAMjB,KAAKkE,UAAUjD,MAAMH,OAAOd,KAAKkE,UAAUpD,QAAWV,IAAGiC,EAAEL,KAAKJ,EAAES,EAAEX,KAAKtB,GAAE,IAAM2B,EAAE,GAASuC,EAAE,GAAoB4G,EAAGrL,EAAd4E,WAAmB0G,OAAOC,KAAKF,GAAGhC,KAAI,SAAAmC,GAAC,OAAEH,EAAEG,MAAI9G,OAAO+G,SAAS7L,QAAQsC,EAAEuD,KAAKgF,EAAEiB,qBAAqBL,IAAI,IAAapG,EAAGjF,EAAV0E,OAA8B,aAAfO,EAAEzB,YAAyBtB,EAAEuD,KAAKgF,EAAEkB,iBAAiB1G,IAAI,IAAckB,EAAGnG,EAAXoF,QAAyE,GAA1C,aAAfe,EAAE3C,YAAyBiB,EAAEgB,KAAKgF,EAAEmB,iBAAiBzF,IAAOnG,EAAE+C,UAAU,CAAC,IAAA8I,EAAiC1L,KAAK2L,mBAAmB9L,EAAE+C,WAA3CyI,EAACK,EAAX9I,UAAwBgJ,EAACF,EAAbG,YAA0DC,EAAE,CAAqB,IAApBT,EAAEtI,QAAQI,MAAMnC,EAA0B,IAApBqK,EAAEtI,QAAQI,MAAM5D,EAAwB,IAAlB8L,EAAEtI,QAAQK,IAAIpC,EAAwB,IAAlBqK,EAAEtI,QAAQK,IAAI7D,EAA2B,IAArB8L,EAAEtI,QAAQC,UAAoB+I,EAAE,CAAsB,IAArBH,EAAE7I,QAAQC,UAAwC,IAA3B4I,EAAE7I,QAAQG,gBAAoD,IAA7B0I,EAAE7I,QAAQE,kBAA6B6I,EAAEE,MAAK,SAAAC,GAAC,OAAEA,MAAIlK,EAAEuD,KAAK+F,GAAMU,EAAEC,MAAK,SAAAC,GAAC,OAAEA,MAAIlK,EAAEuD,KAAKsG,GAAI,IAAYM,EAAGrM,EAATkF,MAA6B,aAAfmH,EAAE7I,YAAyBiB,EAAEgB,KAAKtF,KAAKmM,cAAcD,IAAI,IAAYE,EAAGvM,EAAT8E,MAAirB,GAAppB,aAAfyH,EAAE/I,YAAyBtB,EAAEuD,KAAKtF,KAAKqM,eAAeD,IAAOvM,EAAE6F,QAAQ7F,EAAE6F,OAAOC,aAAatB,SAAQ,SAAAgH,GAAI,IAAMO,EAAE/L,EAAE6F,OAAOK,OAAOsF,GAAG,OAAOO,EAAExF,MAAM,IAAI,UAAU,IAAM0F,EAAEjM,EAAE6F,OAAOE,QAAQyF,GAAG/G,EAAEgB,KAAK0F,EAAKsB,iBAAiBR,EAAEF,EAAE/L,EAAE+C,YAAY,MAAM,IAAI,OAAO,IAAMmJ,EAAElM,EAAE6F,OAAOG,KAAKwF,GAAG/G,EAAEgB,KAAK0F,EAAKuB,cAAcR,EAAEH,IAAI,MAAM,IAAI,aAAa,IAAMK,EAAEpM,EAAE6F,OAAOI,WAAWuF,GAAG/G,EAAEgB,KAAK0F,EAAKwB,oBAAoBP,EAAEL,QAA8B/L,EAAEuF,MAAMC,QAAQ5F,QAAQ6E,EAAEgB,KAAK,CAACtD,KAAK,QAAQe,QAAQ,CAACkG,MAAMpJ,EAAEuF,MAAMC,QAAQ6D,KAAI,SAAAmC,GAAI,MAAM,CAAChC,OAAOgC,EAAElC,KAAKC,cAAcF,IAAI8B,EAAKR,kCAAkCpF,MAAM,CAAC2B,MAAM,CAAC6C,KAAKyB,EAAEjG,MAAM2B,OAAO9C,KAAKoH,EAAEjG,MAAMnB,KAAKsF,SAAS8B,EAAEjG,MAAMmE,iBAAmBjF,EAAE7E,OAAO,CAAC,IAAM4L,EAAE,CAACrJ,KAAK,SAASe,QAAQ,CAAC8B,QAAQP,IAAIvC,EAAEuD,KAAK+F,GAAG,IAA+BoB,EAAE,CAAC9F,OAAO,CAACC,SAAlC/G,EAAE6G,iBAA6C,MAAM,CAACzG,QAAQD,KAAKC,QAAQqD,KAAKrB,EAAER,MAAMY,EAAER,WAAWE,EAAE0E,aAAagG,KAAG,CAAApL,IAAA,gBAAAC,MAAA,SAAczB,GAAG,MAAM,CAACmC,KAAK,QAAQe,QAAQ,CAACM,WAAWxD,EAAEwD,WAAWyD,MAAMjH,EAAEgH,QAAQI,UAAU,CAAC2C,KAAK/J,EAAEkH,OAAO9C,KAAKjE,KAAK0K,kCAAkC7K,EAAEoB,WAAS,CAAAI,IAAA,iBAAAC,MAAA,SAAezB,GAAG,IAAMO,EAAEO,KAAKmK,KAAKnK,KAAAoK,IAAA/K,KAAK0C,YAAYzB,MAAO,GAACN,KAAAoK,IAAC/K,KAAK0C,YAAY5B,OAAQ,IAAG,OAAOjB,EAAEwD,YAAY,IAAI,SAAS,MAAM,CAACrB,KAAK,QAAQe,QAAQ,CAACf,KAAK,SAASe,QAAQ,CAACI,MAAMnD,KAAKwK,iCAAiC3K,EAAEqH,OAAO/D,OAAOC,IAAIpD,KAAKwK,iCAAiC3K,EAAEqH,OAAO9D,KAAK2E,WAAW/H,KAAK2K,gCAAgC9K,EAAEqH,OAAOa,eAAe,IAAI,SAAS,MAAM,CAAC/F,KAAK,QAAQe,QAAQ,CAACf,KAAK,SAASe,QAAQ,CAACI,MAAMnD,KAAKwK,iCAAiC3K,EAAEyH,OAAOI,QAAQtE,IAAIpD,KAAKwK,iCAAiCxK,KAAK4K,oBAAoB/K,EAAEyH,OAAOI,OAAO,EAAE7H,EAAEyH,OAAOK,SAASI,WAAW/H,KAAK2K,gCAAgC9K,EAAEyH,OAAOS,YAAY2E,eAAe,MAAM,IAAI,WAAW,IAAe9K,EAAG/B,EAAZ2H,SAAc,MAAM,CAACxF,KAAK,QAAQe,QAAQ,CAACf,KAAK,WAAWe,QAAQ,CAACI,MAAMnD,KAAKwK,iCAAiCxK,KAAK4K,oBAAoBhJ,EAAEoG,OAAOpG,EAAEoB,SAAS5C,EAAE,IAAIgD,IAAIpD,KAAKwK,iCAAiCxK,KAAK4K,oBAAoBhJ,EAAEoG,OAAOpG,EAAEoB,UAAU5C,EAAE,IAAI6D,KAAKjE,KAAK2K,gCAAgC9K,EAAE2H,SAASvD,MAAM8D,WAAW/H,KAAK2K,gCAAgC9K,EAAE2H,SAASO,YAAY4E,aAAa,MAAM,QAAQ,MAAM,CAAC3K,KAAK,QAAQe,QAAQ,CAACf,KAAK,WAAWe,QAAQ,CAACgF,WAAW/H,KAAK2K,gCAAgC9K,EAAEuH,SAASW,kBAAgB,CAAA1G,IAAA,mBAAAC,MAAA,SAAiBzB,EAAEO,EAAEwB,GAAG,MAAM,CAACI,KAAK,UAAUe,QAAQ,CAACoD,SAASnG,KAAKwK,iCAAiCpK,EAAE+F,UAAUE,WAAW,CAACrF,EAAEhB,KAAK2K,gCAAgCvK,EAAE6D,KAAKhD,OAAO1B,EAAES,KAAK2K,gCAAgCvK,EAAE6D,KAAKnD,SAASkC,SAAS5C,EAAE4C,SAASE,gBAAgB9C,EAAE8C,iBAAgB,MAAUtB,EAAEsB,iBAAgB,GAAOD,kBAAkB7C,EAAE6C,mBAAkB,MAAUrB,EAAEqB,mBAAkB,GAAOI,WAAWxD,EAAEwD,WAAWyD,MAAMjH,EAAEgH,QAAQI,UAAU,CAAC2C,KAAK/J,EAAEoH,WAAW4C,SAAShK,EAAEgK,aAAW,CAAAxI,IAAA,gBAAAC,MAAA,SAAczB,EAAEO,GAAG,MAAM,CAAC4B,KAAK,OAAOe,QAAQ,CAACoD,SAASnG,KAAKwK,iCAAiCpK,EAAE+F,UAAUnD,SAAS5C,EAAE4C,SAASE,gBAAe,EAAMD,kBAAiB,EAAMoF,eAAexI,EAAEwD,WAAWiF,SAAStI,KAAK2K,gCAAgC9K,EAAEyI,UAAUC,SAASvI,KAAK2K,gCAAgC9K,EAAEoB,OAAO4E,KAAKhG,EAAEgG,KAAK8C,WAAW9I,EAAE8I,WAAW5B,MAAM,CAAC6C,KAAK/J,EAAE4I,WAAWC,gBAAgB,CAACkB,KAAK/J,EAAE6I,iBAAiBF,UAAU3I,EAAE2I,cAAY,CAAAnH,IAAA,sBAAAC,MAAA,SAAoBzB,EAAEO,GAAG,MAAM,CAAC4B,KAAK,aAAae,QAAQ,CAACoD,SAASnG,KAAKwK,iCAAiCpK,EAAE+F,UAAUnD,SAAS5C,EAAE4C,SAASE,gBAAe,EAAMD,kBAAiB,EAAMI,WAAWxD,EAAEwD,WAAW0F,SAASlJ,EAAEiJ,WAAWjD,KAAKhG,EAAEgG,KAAKgD,KAAKhJ,EAAEgJ,KAAK5H,MAAMjB,KAAK2K,gCAAgC9K,EAAEoB,OAAO2H,QAAQ5I,KAAK2K,gCAAgC9K,EAAE+I,SAAS7B,MAAM,CAAC6C,KAAK/J,EAAEkH,WAAS,CAAA1F,IAAA,qBAAAC,MAAA,SAAmBzB,GAAqQ,MAAM,CAAC+C,UAA1O,CAACZ,KAAK,YAAYe,QAAQ,CAACI,MAArCtD,EAAfsD,MAA4DC,IAA7CvD,EAAPuD,IAA0DJ,SAASnD,EAAEmD,SAASM,KAAK,CAACD,WAAWxD,EAAEwD,cAAsKwI,YAAhJ,CAAC7J,KAAK,cAAce,QAAQ,CAACC,SAASnD,EAAEiD,eAAeG,iBAAiBpD,EAAEoD,iBAAiBC,eAAerD,EAAEqD,qBAAmD,EAAA7B,IAAA,mBAAAC,MAAnnK,SAAwBzB,GAAG,MAAM,CAACmC,KAAK,SAASe,QAAQ,CAACyG,UAAU3J,EAAE2J,UAAUnG,WAAWxD,EAAEwD,eAAa,CAAAhC,IAAA,uBAAAC,MAAA,SAA4BzB,GAAG,MAAM,CAACmC,KAAK,cAAce,QAAQlD,KAAG,CAAAwB,IAAA,mBAAAC,MAAA,SAAwBzB,GAAG,MAAM,CAACmC,KAAK,UAAUe,QAAQ,CAACM,WAAWxD,EAAEwD,WAAWmG,UAAU3J,EAAEgH,QAAQ6C,UAAU7J,EAAE6J,UAAU/H,QAAQ,UAAS,SAAAvB,GAAC,UAAAT,OAAMS,EAAEwM,sBAAmB,CAAAvL,IAAA,oBAAAC,MAAA,WAA2B,MAAM,CAACmC,SAAS,QAAQxD,QAAQoK,EAAUwC,WAAU,IAAIC,MAAOC,mBAAezC,EAA/pC,GAAy1L0C,EAAG,CAAC,QAAQjD,EAAE,SAASnK","file":"static/js/0.bd22f6cd.chunk.js","sourcesContent":["import{Ma as v,Oa as b,Qa as u,lb as h}from\"./chunk-UDNMGV4K.js\";var I=(y=\"image/png\")=>`data:${y};base64,`;var d=class{constructor(e){this.version=\"3.12.0\";this.spriteOrder=0;this.mapRelativeCropPointToImageSpace=e=>{const i=h.relativeToAbsolutePoint(e,this.cropSpace,false);return h.pointFromSpaceToSpace(i,this.cropSpace,this.imageSpace,false)};this.mapRelativeCropSizeToScaledImageSize=e=>{return e*Math.min(this.outputSize.height*this.outputScale.x,this.outputSize.width*this.outputScale.y)};this.mapRelativeCropSizeToUnscaledImageSize=e=>{return e*Math.min(this.outputSize.height,this.outputSize.width)};this.editor=e}static deserializeFilter(e){return{intensity:e.intensity,identifier:e.identifier}}static deserializeAdjustments(e){return{...e}}static deserializeOverlay(e){return{identifier:e.identifier,opacity:e.intensity,blendMode:e.blendMode.replace(/([ _][a-z])/g,i=>i.toUpperCase().replace(\" \",\"\").replace(\"_\",\"\"))}}static initializeEmptyTransform(){return{outputRotation:0,flipHorizontally:false,flipVertically:false,start:{x:0,y:0},end:{x:1,y:1},rotation:0}}static deserialzeColor(e){if(e){if(e.rgba){return e.rgba}}return[0,0,0,0]}validateVersion(e){return this.version===e}static checkIfPlatformHTML(e){return e===\"html5\"}static deserializeStickers(e){return{identifier:e.identifier,opacity:e.alpha||0,tintMode:e.tintMode||\"none\",tintColor:d.deserialzeColor(e.tintColor)}}checkIsSerialisationValid(e){if(typeof e!==\"string\"&&this.validateVersion(e.version))return true;if(typeof e===\"string\"){throw new Error(\"Invalid input of type string, please provide an object\")}return false}deserializeImage(e){const i={};if(e.image){i.image={width:e.image.width,height:e.image.height,data:e.image.data?e.image.data.replace(I(),\"\"):\"\"};i.image.data=i.image.data?I()+i.image.data:\"\"}return i}deserializeTransformation(e){const i={};const a=e.operations.find(o=>o.type===\"orientation\");const r=e.operations.find(o=>o.type===\"transform\");const[n]=this.editor.engine.getRootContainers();this.previewPosition=this.editor.transformToolStore.defaultCropMaskPosition;this.previewSize=this.editor.transformToolStore.maxCropMaskSize;this.imageSpace=n;i.transform=d.initializeEmptyTransform();if(a!=null){i.transform.outputRotation=a.options.rotation;i.transform.flipHorizontally=a.options.flipHorizontally||false;i.transform.flipVertically=a.options.flipVertically||false}if(r){i.transform.start=r.options.start;i.transform.end=r.options.end;i.transform.rotation=r.options.rotation||0;i.transform.identifier=r.options.meta?r.options.meta.identifier:\"\"}return i}deserialize(e){var n,o;const i={};if(e.meta?!d.checkIfPlatformHTML(e.meta.platform):false){console.warn(\"Read serialisation from another Platform\")}const a=this.editor.engineMediator.output.container.getResolution();const{size:r}=this.editor.engineMediator.image.container.getBounds();this.outputSize=a;this.imageSize=r;this.cropSpace=this.editor.engine.getOutputContainer();this.outputScale=this.cropSpace.getScale();e.operations.forEach(p=>{switch(p.type){case\"filter\":i.filter=d.deserializeFilter(p.options);break;case\"adjustments\":i.adjustment=d.deserializeAdjustments(p.options);break;case\"focus\":i.focus=this.deserializeFocus(p.options);break;case\"sprite\":const{sprites:z}=p.options;z.forEach(t=>{switch(t.type){case\"frame\":i.frame=this.deserializeFrame(t.options);break;case\"overlay\":i.overlay=d.deserializeOverlay(t.options);break;case\"brush\":if(!i.brush){i.brush=this.deserializeBrush(t.options)}else{i.brush.strokes.push(...this.deserializeBrush(t.options).strokes)}break;case\"sticker\":case\"text\":case\"textdesign\":if(!i.sprite){i.sprite={spriteIdList:[],sticker:{},text:{},textdesign:{},common:{}}}const s=b();i.sprite.spriteIdList.push(s);i.sprite.common[s]={order:this.spriteOrder,position:this.mapRelativeCropPointToImageSpace(t.options.position),tool:\"sticker\",rotation:t.options.rotation||0,flipHorizontally:t.options.flipHorizontally,flipVertically:t.options.flipVertically};this.spriteOrder+=1;if(t.type===\"sticker\"){i.sprite.common[s].tool=\"sticker\";i.sprite.common[s].size={width:this.mapRelativeCropSizeToScaledImageSize(t.options.dimensions.x),height:this.mapRelativeCropSizeToScaledImageSize(t.options.dimensions.y)};i.sprite.sticker[s]=d.deserializeStickers(t.options)}else if(t.type===\"text\"){i.sprite.common[s].tool=\"text\";i.sprite.text[s]=this.deserializeTexts(t.options)}else if(t.type===\"textdesign\"){i.sprite.common[s].tool=\"textdesign\";i.sprite.textdesign[s]=this.deserializeTextDesign(t.options)}break;default:break}});break;default:break}});if(e.assetLibrary){i.customStickers=((o=(n=e.assetLibrary)==null?void 0:n.assets)==null?void 0:o.stickers)||[]}return i}deserializeFrame(e){return{identifier:e.identifier,opacity:e.alpha,width:this.mapRelativeCropSizeToUnscaledImageSize(e.size),color:d.deserialzeColor(e.tintColor)}}deserializeFocus(e){switch(e.type){case\"linear\":return{identifier:\"linear\",linear:this.deserializeLinearFocus(e.options)};case\"gaussian\":return{identifier:\"gaussian\",gaussian:this.deserializeGaussianFocus(e.options)};case\"radial\":return{identifier:\"radial\",radial:this.deserializeRadialFocus(e.options)};case\"mirrored\":return{identifier:\"mirrored\",mirrored:this.deserializeMirroredFocus(e.options)};default:break}return void 0}deserializeRadialFocus(e){return{center:this.mapRelativeCropPointToImageSpace(e.start),radius:new u(this.mapRelativeCropPointToImageSpace(e.start)).subtract(new u(this.mapRelativeCropPointToImageSpace(e.end))).magnitude,blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeLinearFocus(e){return{start:this.mapRelativeCropPointToImageSpace(e.start),end:this.mapRelativeCropPointToImageSpace(e.end),blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeGaussianFocus(e){return{blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeMirroredFocus(e){const i=new u(this.mapRelativeCropPointToImageSpace(e.start)).subtract(new u(this.mapRelativeCropPointToImageSpace(e.end)));return{origin:new u(this.mapRelativeCropPointToImageSpace(e.start)).add(new u(this.mapRelativeCropPointToImageSpace(e.end))).divide(2),rotation:Math.atan2(i.y,i.x),size:this.mapRelativeCropSizeToScaledImageSize(e.size),blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeTexts(e){return{identifier:v(e.fontIdentifier),fontSize:this.mapRelativeCropSizeToScaledImageSize(e.fontSize),width:this.mapRelativeCropSizeToScaledImageSize(e.maxWidth),alignment:e.alignment,textColor:d.deserialzeColor(e.color),backgroundColor:d.deserialzeColor(e.backgroundColor),lineHeight:e.lineHeight,text:e.text}}deserializeTextDesign(e){return{identifier:e.identifier,width:this.mapRelativeCropSizeToScaledImageSize(e.width),padding:this.mapRelativeCropSizeToScaledImageSize(e.padding),color:d.deserialzeColor(e.color),seed:e.seed,text:e.text,isInverted:e.inverted}}deserializeBrush(e){return{strokes:e.paths.map(i=>{return{path:{controlPoints:i.points.map(this.mapRelativeCropPointToImageSpace)},brush:{id:\"imgly_brush_radial\",color:d.deserialzeColor(i.brush.color),size:i.brush.size,hardness:i.brush.hardness}}})}}};var k=(y=\"image/png\")=>`data:${y};base64,`;var c=class{constructor(e){this.version=\"3.9.0\";this.spriteOrder=0;this.mapRelativeCropPointToImageSpace=e=>{const i=h.relativeToAbsolutePoint(e,this.cropSpace,false);return h.pointFromSpaceToSpace(i,this.cropSpace,this.imageSpace,false)};this.mapRelativeCropSizeToScaledImageSize=e=>{return e*Math.min(this.outputSize.height*this.outputScale.x,this.outputSize.width*this.outputScale.y)};this.mapRelativeCropSizeToUnscaledImageSize=e=>{return e*Math.min(this.outputSize.height,this.outputSize.width)};this.editor=e}static deserializeFilter(e){return{intensity:e.intensity,identifier:e.identifier}}static deserializeAdjustments(e){return{...e}}static deserializeOverlay(e){return{identifier:e.identifier,opacity:e.intensity,blendMode:e.blendMode.replace(/([ _][a-z])/g,i=>i.toUpperCase().replace(\" \",\"\").replace(\"_\",\"\"))}}static initializeEmptyTransform(){return{outputRotation:0,flipHorizontally:false,flipVertically:false,start:{x:0,y:0},end:{x:1,y:1},rotation:0}}static deserialzeColor(e){if(e){if(e.rgba){return e.rgba}}return[0,0,0,0]}validateVersion(e){return this.version===e}static checkIfPlatformHTML(e){return e===\"html5\"}static deserializeStickers(e){return{identifier:e.identifier,opacity:e.alpha||0,tintMode:e.tintMode||\"none\",tintColor:c.deserialzeColor(e.tintColor)}}checkIsSerialisationValid(e){if(typeof e!==\"string\"&&this.validateVersion(e.version))return true;if(typeof e===\"string\"){throw new Error(\"Invalid input of type string, please provide an object\")}return false}deserializeImage(e){const i={};if(e.image){i.image={width:e.image.width,height:e.image.height,data:e.image.data?e.image.data.replace(k(),\"\"):\"\"};i.image.data=i.image.data?k()+i.image.data:\"\"}return i}deserializeTransformation(e){const i={};const a=e.operations.find(o=>o.type===\"orientation\");const r=e.operations.find(o=>o.type===\"transform\");const[n]=this.editor.engine.getRootContainers();this.previewPosition=this.editor.transformToolStore.defaultCropMaskPosition;this.previewSize=this.editor.transformToolStore.maxCropMaskSize;this.imageSpace=n;i.transform=c.initializeEmptyTransform();if(a!=null){i.transform.outputRotation=a.options.rotation;i.transform.flipHorizontally=a.options.flipHorizontally||false;i.transform.flipVertically=a.options.flipVertically||false}if(r){i.transform.start=r.options.start;i.transform.end=r.options.end;i.transform.rotation=r.options.rotation||0;i.transform.identifier=r.options.meta?r.options.meta.identifier:\"\"}return i}deserialize(e){var n,o;const i={};if(e.meta?!c.checkIfPlatformHTML(e.meta.platform):false){console.warn(\"Read serialisation from another Platform\")}const a=this.editor.engineMediator.output.container.getResolution();const{size:r}=this.editor.engineMediator.image.container.getBounds();this.outputSize=a;this.imageSize=r;this.cropSpace=this.editor.engine.getOutputContainer();this.outputScale=this.cropSpace.getScale();e.operations.forEach(p=>{switch(p.type){case\"filter\":i.filter=c.deserializeFilter(p.options);break;case\"adjustments\":i.adjustment=c.deserializeAdjustments(p.options);break;case\"focus\":i.focus=this.deserializeFocus(p.options);break;case\"sprite\":const{sprites:z}=p.options;z.forEach(t=>{switch(t.type){case\"frame\":i.frame=this.deserializeFrame(t.options);break;case\"overlay\":i.overlay=c.deserializeOverlay(t.options);break;case\"brush\":if(!i.brush){i.brush=this.deserializeBrush(t.options)}else{i.brush.strokes.push(...this.deserializeBrush(t.options).strokes)}break;case\"sticker\":case\"text\":case\"textdesign\":if(!i.sprite){i.sprite={spriteIdList:[],sticker:{},text:{},textdesign:{},common:{}}}const s=b();i.sprite.spriteIdList.push(s);i.sprite.common[s]={order:this.spriteOrder,position:this.mapRelativeCropPointToImageSpace(t.options.position),tool:\"sticker\",rotation:t.options.rotation||0,flipHorizontally:t.options.flipHorizontally,flipVertically:t.options.flipVertically};this.spriteOrder+=1;if(t.type===\"sticker\"){i.sprite.common[s].tool=\"sticker\";i.sprite.common[s].size={width:this.mapRelativeCropSizeToScaledImageSize(t.options.dimensions.x),height:this.mapRelativeCropSizeToScaledImageSize(t.options.dimensions.y)};i.sprite.sticker[s]=c.deserializeStickers(t.options)}else if(t.type===\"text\"){i.sprite.common[s].tool=\"text\";i.sprite.text[s]=this.deserializeTexts(t.options)}else if(t.type===\"textdesign\"){i.sprite.common[s].tool=\"textdesign\";i.sprite.textdesign[s]=this.deserializeTextDesign(t.options)}break;default:break}});break;default:break}});if(e.assetLibrary){i.customStickers=((o=(n=e.assetLibrary)==null?void 0:n.assets)==null?void 0:o.stickers)||[]}return i}deserializeFrame(e){return{identifier:e.identifier,opacity:e.alpha,width:this.mapRelativeCropSizeToUnscaledImageSize(e.size),color:c.deserialzeColor(e.tintColor)}}deserializeFocus(e){switch(e.type){case\"linear\":return{identifier:\"linear\",linear:this.deserializeLinearFocus(e.options)};case\"gaussian\":return{identifier:\"gaussian\",gaussian:this.deserializeGaussianFocus(e.options)};case\"radial\":return{identifier:\"radial\",radial:this.deserializeRadialFocus(e.options)};case\"mirrored\":return{identifier:\"mirrored\",mirrored:this.deserializeMirroredFocus(e.options)};default:return void 0}}deserializeRadialFocus(e){return{center:this.mapRelativeCropPointToImageSpace(e.start),radius:new u(this.mapRelativeCropPointToImageSpace(e.start)).subtract(new u(this.mapRelativeCropPointToImageSpace(e.end))).magnitude,blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeLinearFocus(e){return{start:this.mapRelativeCropPointToImageSpace(e.start),end:this.mapRelativeCropPointToImageSpace(e.end),blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeGaussianFocus(e){return{blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeMirroredFocus(e){const i=new u(this.mapRelativeCropPointToImageSpace(e.start)).subtract(new u(this.mapRelativeCropPointToImageSpace(e.end)));return{origin:new u(this.mapRelativeCropPointToImageSpace(e.start)).add(new u(this.mapRelativeCropPointToImageSpace(e.end))).divide(2),rotation:Math.atan2(i.y,i.x),size:this.mapRelativeCropSizeToScaledImageSize(e.size),blurRadius:this.mapRelativeCropSizeToScaledImageSize(e.blurRadius)}}deserializeTexts(e){return{identifier:v(e.fontIdentifier),fontSize:this.mapRelativeCropSizeToScaledImageSize(e.fontSize),width:this.mapRelativeCropSizeToScaledImageSize(e.maxWidth),alignment:e.alignment,textColor:c.deserialzeColor(e.color),backgroundColor:c.deserialzeColor(e.backgroundColor),lineHeight:e.lineHeight,text:e.text}}deserializeTextDesign(e){return{identifier:e.identifier,width:this.mapRelativeCropSizeToScaledImageSize(e.width),padding:this.mapRelativeCropSizeToScaledImageSize(e.padding),color:c.deserialzeColor(e.color),seed:e.seed,text:e.text,isInverted:e.inverted}}deserializeBrush(e){return{strokes:e.paths.map(i=>{return{path:{controlPoints:i.points.map(this.mapRelativeCropPointToImageSpace)},brush:{id:\"imgly_brush_radial\",color:c.deserialzeColor(i.brush.color),size:i.brush.size,hardness:i.brush.hardness}}})}}};var E=\"@photoeditorsdk/root\";var j=\"5.19.0\";var A=\"The most comprehensive photo editor SDK for HTML5\";var H=\"http://github.com/imgly/pesdk-html5\";var L=\"PhotoEditorSDK (img.ly GmbH) <contact@img.ly>\";var V=\"SEE LICENSE IN LICENSE.md\";var B=true;var G={};var U={start:\"yarn workspace @example/react start\",build:\"yarn sdk-script build\",\"build:rollup\":\"yarn sdk-script build rollup\",\"package:release\":\"cd dist/photoeditorsdk && npm publish\",\"package:pre-release\":\"cd dist/photoeditorsdk && npm publish --tag next\",\"lint:css\":\"stylelint './packages/**/*.tsx'\",\"lint:ts\":\"eslint ./packages/**/*.{ts,tsx}\",\"lint:ts-engine\":\"eslint ./engine/**/*.ts\",\"lint:types\":\"tsc --noEmit -p tsconfig.json --skipLibCheck\",\"lint:types-engine\":\"tsc --noEmit -p engine/tsconfig.json --skipLibCheck\",lint:\"run-p lint:*\",test:\"$(npm bin)/jest\",e2e:\"cypress open\",\"e2e:server\":\"sdk-script ui -P 3000 -D build\",\"e2e:ci\":\"CYPRESS_RETRIES=2 cypress run --browser chrome --headed\",deploy:\"yarn workspace examp run deploy:pages\",docs:\"rm -rf ./docs && typedoc\",postinstall:\"yarn sdk-script server:build\"};var N={\"@elv1n/cypress-plugin-snapshots\":\"1.4.4\",\"@types/jest\":\"^24.0.11\",\"@types/pixelmatch\":\"^5.2.2\",\"@types/pngjs\":\"^3.4.2\",\"@types/react\":\"^16.8.13\",\"@types/react-dom\":\"^16.8.4\",\"@types/styled-components\":\"4.4.0\",\"@typescript-eslint/eslint-plugin\":\"4.6.0\",\"@typescript-eslint/parser\":\"4.6.0\",autoprefixer:\"^9.7.4\",\"cross-env\":\"^7.0.2\",cypress:\"6.6.0\",eslint:\"7.10.0\",\"eslint-config-airbnb\":\"18.2.0\",\"eslint-config-prettier\":\"6.12.0\",\"eslint-import-resolver-typescript\":\"^2.3.0\",\"eslint-plugin-cypress\":\"^2.11.2\",\"eslint-plugin-import\":\"2.22.1\",\"eslint-plugin-jsx-a11y\":\"6.3.1\",\"eslint-plugin-no-only-tests\":\"^2.4.0\",\"eslint-plugin-prettier\":\"3.1.4\",\"eslint-plugin-react\":\"7.21.3\",husky:\"4.3.0\",jest:\"24.9.0\",jsdoc:\"^3.6.3\",\"lint-staged\":\"10.4.0\",\"lodash.defaults\":\"^4.2.0\",\"mobx-react-devtools\":\"^6.1.1\",\"native-url\":\"0.3.4\",\"npm-run-all\":\"^4.1.5\",prettier:\"^2.0.5\",react:\"16.8.6\",\"react-dom\":\"16.8.6\",\"start-server-and-test\":\"1.11.5\",\"styled-components\":\"4.4.1\",stylelint:\"^13.7.2\",\"stylelint-config-recommended\":\"^3.0.0\",\"stylelint-config-standard\":\"^20.0.0\",\"stylelint-config-styled-components\":\"^0.1.1\",\"stylelint-processor-styled-components\":\"^1.10.0\",\"ts-jest\":\"24.3.0\",typedoc:\"^0.17.8\",typescript:\"3.8.3\",\"utility-types\":\"^3.10.0\"};var K={\"@juggle/resize-observer\":\"3.2.0\",\"@reach/portal\":\"^0.13.0\",\"can-use-dom\":\"0.1.0\",\"lodash.debounce\":\"4.0.8\",\"lodash.memoize\":\"4.1.2\",\"lodash.throttle\":\"4.1.1\",mobx:\"4.15.7\",\"mobx-react\":\"6.3.1\",photoeditorsdk:\"1.0.0\",\"react-app-polyfill\":\"1.0.6\",\"react-transition-group\":\"^4.4.1\"};var X={node:\"10.x || 11.x || 12.x || 13.x || 14.x || 15.x\"};var $={eslint:\"7.10.0\"};var W=[\"examples/server\",\"examples/material-ui\",\"examples/ssr\",\"examples/react\",\"packages/*\",\"!packages/ui\",\"packages/ui/*\",\"!packages/ui/components\",\"packages/ui/components/*\",\"engine/*\",\"test/*\",\"scripts\"];var q={hooks:{\"pre-commit\":\"lint-staged\",\"pre-push\":\"true\"}};var F={name:E,version:j,description:A,repository:H,author:L,license:V,private:B,bin:G,scripts:U,devDependencies:N,dependencies:K,devEngines:X,resolutions:$,workspaces:W,husky:q};var f=class{constructor(e,i,a,r,n,o){this.version=\"3.12.0\";this.mapImagePointToRelativeCropPoint=e=>{const i=h.pointFromSpaceToSpace(e,this.imageSpace,this.cropSpace,false);return h.absoluteToRelativePoint(i,this.cropSpace,false)};this.mapSizeToRelativeUnscaledCropSize=e=>{return e/Math.min(this.outputSize.height,this.outputSize.width)};this.mapSizeToRelativeScaledCropSize=e=>{return e/Math.min(this.outputSize.height*this.outputScale.x,this.outputSize.width*this.outputScale.y)};this.getPointInDirection=(e,i=0,a=3)=>{const r=Math.tan(i);const n=Math.sqrt(r**2+1);return{x:e.x+a/n,y:e.y+a*r/n}};this.previewPosition=e;this.previewSize=i;this.outputSize=a;this.imageSize=r;this.imageSpace=n;this.cropSpace=o;this.outputScale=o.getScale()}static serializeFilters(e){return{type:\"filter\",options:{intensity:e.intensity,identifier:e.identifier}}}static serializeAdjustments(e){return{type:\"adjustments\",options:e}}static serializeOverlay(e){return{type:\"overlay\",options:{identifier:e.identifier,intensity:e.opacity,blendMode:e.blendMode.replace(/[A-Z]/g,i=>` ${i.toLowerCase()}`)}}}static serializeMetaData(){return{platform:\"html5\",version:F.version,createdAt:new Date().toISOString()}}serialise(e,i,a){const r=f.serializeMetaData();const n={width:this.imageSize.width,height:this.imageSize.height};if(i){n.type=a;n.data=i}const o=[];const p=[];const{adjustment:z}=e;if(Object.keys(z).map(l=>z[l]).filter(Boolean).length){o.push(f.serializeAdjustments(z))}const{filter:t}=e;if(t.identifier!==\"identity\"){o.push(f.serializeFilters(t))}const{overlay:s}=e;if(s.identifier!==\"identity\"){p.push(f.serializeOverlay(s))}if(e.transform){const{transform:l,orientation:S}=this.serializeTransform(e.transform);const O=[l.options.start.x!==0,l.options.start.y!==0,l.options.end.x!==1,l.options.end.y!==1,l.options.rotation!==0];const T=[S.options.rotation!==0,S.options.flipVertically!==false,S.options.flipHorizontally!==false];if(O.some(g=>g)){o.push(l)}if(T.some(g=>g)){o.push(S)}}const{frame:C}=e;if(C.identifier!==\"identity\"){p.push(this.serialzeFrame(C))}const{focus:R}=e;if(R.identifier!==\"identity\"){o.push(this.serializeFocus(R))}if(e.sprite){e.sprite.spriteIdList.forEach(l=>{const S=e.sprite.common[l];switch(S.tool){case\"sticker\":const O=e.sprite.sticker[l];p.push(this.serializeSticker(O,S,e.transform));break;case\"text\":const T=e.sprite.text[l];p.push(this.serializeText(T,S));break;case\"textdesign\":const g=e.sprite.textdesign[l];p.push(this.serializeTextDesign(g,S));break;default:break}})}if(e.brush.strokes.length){p.push({type:\"brush\",options:{paths:e.brush.strokes.map(l=>{return{points:l.path.controlPoints.map(this.mapImagePointToRelativeCropPoint),brush:{color:{rgba:l.brush.color},size:l.brush.size,hardness:l.brush.hardness}}})}})}if(p.length){const l={type:\"sprite\",options:{sprites:p}};o.push(l)}const P=e.customStickers;const w={assets:{stickers:P}};return{version:this.version,meta:r,image:n,operations:o,assetLibrary:w}}serialzeFrame(e){return{type:\"frame\",options:{identifier:e.identifier,alpha:e.opacity,tintColor:{rgba:e.color},size:this.mapSizeToRelativeUnscaledCropSize(e.width)}}}serializeFocus(e){const i=Math.sqrt(this.previewSize.width**2+this.previewSize.height**2);switch(e.identifier){case\"linear\":return{type:\"focus\",options:{type:\"linear\",options:{start:this.mapImagePointToRelativeCropPoint(e.linear.start),end:this.mapImagePointToRelativeCropPoint(e.linear.end),blurRadius:this.mapSizeToRelativeScaledCropSize(e.linear.blurRadius)}}};case\"radial\":return{type:\"focus\",options:{type:\"radial\",options:{start:this.mapImagePointToRelativeCropPoint(e.radial.center),end:this.mapImagePointToRelativeCropPoint(this.getPointInDirection(e.radial.center,0,e.radial.radius)),blurRadius:this.mapSizeToRelativeScaledCropSize(e.radial.blurRadius),gradientRadius:.1}}};case\"mirrored\":const{mirrored:a}=e;return{type:\"focus\",options:{type:\"mirrored\",options:{start:this.mapImagePointToRelativeCropPoint(this.getPointInDirection(a.origin,a.rotation,i/2)),end:this.mapImagePointToRelativeCropPoint(this.getPointInDirection(a.origin,a.rotation,-i/2)),size:this.mapSizeToRelativeScaledCropSize(e.mirrored.size),blurRadius:this.mapSizeToRelativeScaledCropSize(e.mirrored.blurRadius),gradientSize:.1}}};default:return{type:\"focus\",options:{type:\"gaussian\",options:{blurRadius:this.mapSizeToRelativeScaledCropSize(e.gaussian.blurRadius)}}}}}serializeSticker(e,i,a){return{type:\"sticker\",options:{position:this.mapImagePointToRelativeCropPoint(i.position),dimensions:{x:this.mapSizeToRelativeScaledCropSize(i.size.width),y:this.mapSizeToRelativeScaledCropSize(i.size.height)},rotation:i.rotation,flipVertically:(i.flipVertically||false)!==(a.flipVertically||false),flipHorizontally:(i.flipHorizontally||false)!==(a.flipHorizontally||false),identifier:e.identifier,alpha:e.opacity,tintColor:{rgba:e.tintColor},tintMode:e.tintMode}}}serializeText(e,i){return{type:\"text\",options:{position:this.mapImagePointToRelativeCropPoint(i.position),rotation:i.rotation,flipVertically:false,flipHorizontally:false,fontIdentifier:e.identifier,fontSize:this.mapSizeToRelativeScaledCropSize(e.fontSize),maxWidth:this.mapSizeToRelativeScaledCropSize(e.width),text:e.text,lineHeight:e.lineHeight,color:{rgba:e.textColor},backgroundColor:{rgba:e.backgroundColor},alignment:e.alignment}}}serializeTextDesign(e,i){return{type:\"textdesign\",options:{position:this.mapImagePointToRelativeCropPoint(i.position),rotation:i.rotation,flipVertically:false,flipHorizontally:false,identifier:e.identifier,inverted:e.isInverted,text:e.text,seed:e.seed,width:this.mapSizeToRelativeScaledCropSize(e.width),padding:this.mapSizeToRelativeScaledCropSize(e.padding),color:{rgba:e.color}}}}serializeTransform(e){const{start:i,end:a}=e;const r={type:\"transform\",options:{start:i,end:a,rotation:e.rotation,meta:{identifier:e.identifier}}};const n={type:\"orientation\",options:{rotation:e.outputRotation,flipHorizontally:e.flipHorizontally,flipVertically:e.flipVertically}};return{transform:r,orientation:n}}};var Te={\"3.9.0\":c,\"3.12.0\":d};export{Te as Deserializers,f as Serializer};\n"],"sourceRoot":""}